{{ $dataJ := getJSON "https://logbook.dives.dev/api/v1/divelogs?limit=1000" }}
{{ $length := len $dataJ.response.divelogs }}

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>

<script type="text/javascript">
$(function(){
  $('tr[data-href]').on('click', function(){
    location.href = $(this).data('href');
  });
});
</script>

<style type="text/css">
   body > main > article > table.divelogSummary > tbody > tr:hover {
     background: #eeeeee;
     color: #424242;
     cursor: pointer;
   }
</style>

<table class="divelogSummary">
  <thead>
    <tr>
      <th style="padding-left: 3px;">#</th>
      <th style="padding-left: 0px;">Date</th>
      <th style="padding-left: 0px; padding-right: 5px;">Region</th>
      <th style="padding-left: 0px;">Point</th>
      <th style="padding-left: 0px;">Dive Time</th>
      <th style="padding-left: 0px;">Max Depth</th>
    </tr>
  </thead>

  {{ range $i, $v := $dataJ.response.divelogs }}

  {{ $divelogNumber := add (sub $length $i) 49 }}
  {{ $diveTimeMinutes := math.Floor (div .dive_duration 60) }}
  {{ $diveTimeSeconds := mod .dive_duration 60 }}
  {{ $pointRegion := .poi.poi_region }}
  {{ $pointName := .poi.poi_name }}
  {{ $maxDepth := .max_depth }}
  {{ $diveDate := .dive_datetime | int | dateFormat "2006/1/2 (Mon)" }}

  <div>
    <tr data-href="https://dives.dev/blog/{{ $divelogNumber }}/">
      <td style="padding-left: 3px;">#{{ $divelogNumber }}</td>
      <td style="padding-left: 0px;">{{ $diveDate }}</td>
      <td style="padding-left: 0px;">{{ $pointRegion }}</td>
      <td style="padding-left: 0px;">{{ $pointName }}</td>
      <td style="padding-left: 0px;">{{ $diveTimeMinutes }}m{{ $diveTimeSeconds }}s</td>
      <td style="padding-left: 0px;">-{{ $maxDepth }}m</td>
    </tr>

  {{ end }}
  </div>
</table>
